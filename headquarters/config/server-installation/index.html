<!doctype html><html lang=en><head><script type=application/javascript>var doNotTrack=!1;doNotTrack||(window.ga=window.ga||function(){(ga.q=ga.q||[]).push(arguments)},ga.l=+new Date,ga('create','UA-129284684-1','auto'),ga('send','pageview'))</script><script async src=https://www.google-analytics.com/analytics.js></script><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><meta name=description content><meta name=keywords content="installation,configuration"><link rel=icon href=/img/favicon/favicon-support-1.png type=image/png sizes=16x16><link rel=icon href=/img/favicon/favicon-support-1-48-win-ico.png type=image/png sizes=48x48><link rel=icon href=/img/favicon/favicon-support-1-158-General-use-iOS-Android.png type=image/png sizes=152x152><link rel=icon href=/img/favicon/favicon-support-1-196-Chrome-for-Android.png type=image/png sizes=196x196><link rel=icon href=/img/favicon/favicon-support-1-558-win10-tile.png type=image/png sizes=558x558><title>Server Installation</title><link rel=stylesheet href=https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css integrity=sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T crossorigin=anonymous><link href="https://fonts.googleapis.com/css?family=Roboto:300,400,500,700,900&subset=cyrillic,cyrillic-ext,greek,greek-ext,latin-ext,vietnamese" rel=stylesheet><link href=/css/all.css rel=stylesheet><link href=https://cdnjs.cloudflare.com/ajax/libs/ekko-lightbox/5.3.0/ekko-lightbox.css rel=stylesheet></head><body><header class="px-md-3 pt-3"><div class=container><div class=row><div class="mb-3 col-lg-6 col-md-12"><a class="navbar-brand text-white pr-0 mr-0 float-left" href=https://mysurvey.solutions/ target=_blank><img src=/img/logo.png alt="Survey Solutions" class=float-left>
<span class="float-left ml-2">Survey<br>Solutions</span></a>
<a class="navbar-text text-white pl-sm-4 ml-sm-4 pl-2 ml-2 float-left" href=https://docs.mysurvey.solutions/>Documentation and knowledge base</a></div><script type=text/template id=my-custom-menu-template>
    <div class="aa">
        <ul class="nav nav-tabs" id="myTab" role="tablist">
            <li class="nav-item">
                <a class="nav-link active" id="docs-tab" data-toggle="tab" href="#docs" role="tab" aria-controls="docs" aria-selected="true">Articles</a>
            </li>
            <li class="nav-item">
                <a class="nav-link" id="forum-tab" data-toggle="tab" href="#forum" role="tab" aria-controls="forum" aria-selected="false">Forum topics</a>
            </li>
        </ul>
        <div class="tab-content">
            <div class="aa-dataset-docs tab-pane fade show active" id="docs" role="tabpanel" aria-labelledby="docs-tab"></div>
            <div class="aa-dataset-forum tab-pane fade" id="forum" role="tabpanel" aria-labelledby="forum-tab"></div>
        </div>
    </div>
</script><div class="col-lg-6 col-md-12 pt-2 mb-4 mb-lg-3"><form class=form-inline onsubmit=return!1><div class="input-group search"><input type=text class="form-control w-100" placeholder="Have a Question? Ask or enter a search term here." id=aa-search-input></div></form></div></div></div></header><main class="container mb-3"><nav aria-label=breadcrumb><ol class="breadcrumb bg-transparent pl-0"><li class=breadcrumb-item><a href=/>Home</a></li><li class=breadcrumb-item><a href=/headquarters/>Headquarters</a></li><li class=breadcrumb-item><a href=/headquarters/config/>Setup and Configuration</a></li><li class="breadcrumb-item active" aria-current=page>Server Installation</li></ol></nav><div class=mb-4><article class="article d-block w-100"><div class="mb-5 pb-1 d-block w-100 page-title d-flex align-items-end"><h2 class="mb-3 mr-auto pr-3">Server Installation</h2><div class="data text-right">January 11, 2021</div></div><div class=article-content><p>Installation has following steps:</p><ol><li><a href=#installing-postgresql>Installing PostgreSQL</a></li><li><a href=#installing-surveysolutions>Installing SurveySolutions</a></li><li><a href=#post-installation-configuration>Post installation configuration</a></li></ol><h2 id=installing-postgresql>Installing PostgreSQL</h2><p>Make sure that you have an installed and running instance of PostgreSQL
<strong>before running SurveySolutions.exe</strong></p><p>You can download PostgreSQL from
<a href=https://www.postgresql.org/download/windows/>here</a> and run the setup. Pick
the latest stable version (note: Survey Solutions will not work with PostgreSQL
prior to version 10.0).</p><p>During the process you&rsquo;ll set the password for the database superuser:</p><details><summary>📷 PostgreSQL password</summary><p><img src=images/pg_password.png alt="Postgres password" title="PostgreSQL password"></p></details><br><p>and the port, on which the PostgreSQL server will be running:</p><details><summary>📷 PostgreSQL port</summary><p><img src=images/pg_port.png alt="Postgres port" title="PostgreSQL port"></p></details><br><p>After the installation is complete, follow the instructions for
<a href=https://wiki.postgresql.org/wiki/Tuning_Your_PostgreSQL_Server>tuning PostgreSQL for production use</a></p><h2 id=installing-survey-solutions>Installing Survey Solutions</h2><p>Download the <a href=https://mysurvey.solutions/Download>Survey Solutions installer</a></p><p>Run SurveySolutions.exe. It will ask you for two parameters: install location
and PostgreSQL connection parameters.</p><p>For the install location – choose any or keep the default (<code>C:\Survey Solutions\</code>)</p><details><summary>📷 Survey Solutions location</summary><p><img src=images/ss_location.png alt="Survey Solutions location"></p></details><br><p>For PostgreSQL connection parameters (default values will be already there)
specify the port and password you&rsquo;ve chosen when setting up the PostgreSQL
earlier:</p><details><summary>📷 Survey Solutions database connection</summary><p><img src=images/ss_connection_settings.png alt="Survey Solutions database connection"></p></details><br><p>That&rsquo;s it. At the end, finish installation page will automatically open
in your browser where you&rsquo;ll be able to create administrator user for
Survey Solutions Headquarters application. The link to the site will be
automatically added to your start menu, but you can always access it by
directly typing the address in the browser&rsquo;s address bar.</p><p>In order to check if the application is running correctly you can open
<code>http://localhost:9700/.hc</code> URL. It should output <code>Healthy</code> message.</p><h2 id=post-installation-configuration>Post installation configuration</h2><p>The post-installation configuration involves the following:</p><ul><li><p><a href=#bindings>adjusting the site bindings</a>;</p></li><li><p><a href=#ssl>SSL certificate</a>;</p></li><li><p><a href=#firewall>adjusting the firewall rules</a>;</p></li><li><p><a href=#loadbalancer>adjusting the load balancer</a>;</p></li><li><p><a href=#configuration>adjusting the application configuration</a>:</p><ul><li><a href=#baseurl>BaseURL</a>;</li><li><a href=#captcha>Captcha</a>;</li><li><a href=#googlemaps>Google Maps</a>;</li><li><a href=#geotiff>GeoTIFF</a>.</li></ul></li></ul><p><a name=bindings></a></p><h3 id=adjusting-the-site-bindings>Adjusting the site bindings</h3><p>By default Survey Solutions is installed as a web application and runs
behind the IIS web server. By default it uses port 9700. This will
require all users to add the port number :9700 when referring to your
server in any URL.</p><p>Most firewalls will block custom ports by default and additional
configuration may be required to have the server accessible from
external networks/Internet.</p><p>If you need to change port you can do it in the IIS configuration manager.
To access it right click on start menu, select run option and execute the
<code>inetmgr</code> command.</p><p>In the IIS Manager you will find the Survey Solutions application:</p><details><summary>📷 Survey Solutions in IIS Manager</summary><p><img src=images/ss_iis_settings.png alt="Survey Solutions in IIS Manager"></p></details><br><p>If you click on the <code>Bindings...</code> link in the right panel you will be
able to add new ports, such as 80 for HTTP and 443 for HTTPS.</p><p><a name=ssl></a></p><h3 id=ssl-certificate>SSL certificate</h3><p>If your Survey Solutions instance is exposed to the public in the Internet,
it is highly recommended to setup SSL encryption for web server by applying
an SSL certificate.</p><p>The configuration depends on the
<a href=https://en.wikipedia.org/wiki/Certificate_authority#Providers>certificate provider</a>
that you choose, so refer to their documentation on how to setup IIS.</p><p><a name=firewall></a></p><h3 id=firewall-rules>Firewall rules</h3><p>To permit communication of Survey Solutions with the Designer and other utilized
services you may need to enable certain ports or types of communication as
listed below. The instructions vary by type of the security software used.
See #3 in the <a href=/getting-started/faq-for-it-personnel/>FAQ for IT</a> for common
security software instructions.</p><ul><li>allow incoming connections to the port that you&rsquo;ve set up the server binding
of Survey Solutions;</li><li>allow outgoing connections to the Designer site:
<code>https://designer.mysurvey.solutions</code>;</li><li>allow outgoing connections to the Survey Solutions site:
<code>https://mysurvey.solutions</code>.</li></ul><p>In addition expect the client (browser) to</p><ul><li>send queries to the Maps server being used:
typically <code>https://maps.googleapis.com</code> and <code>https://google.com</code>
(or see <a href=/headquarters/config/alternative-maps-for-servers-in-china/>here</a> for
alternative settings for China);</li><li>send queries to the CAPTCHA server being used (if it is used):
<code>https://www.google.com</code> and <code>https://www.gstatic.com</code></li></ul><p>Survey Solutions operates with HTTP/HTTPS requests that may be rather large
(multiple MB). Your server must be configured to receive and process such
queries (rather than block them). This may necessitate additional
<a href=https://en.wikipedia.org/wiki/Web_application_firewall>WAF configuration</a>. If
this is not permitted, the interviewers may not be able to synchronize their
tablets.</p><p><a name=loadbalancer></a></p><h3 id=load-balancer>Load balancer</h3><p>If you are using a load balancer, please make sure that it is configured to use:</p><ul><li>sticky sessions, and</li><li>web sockets.</li></ul><p>If this is not satisfied, web interviews will not work resulting in errors for
the respondents (this may not be immediately obvious to the person setting up
the Survey Solutions server).</p><p><a name=configuration></a></p><h3 id=survey-solutions-application-configuration>Survey Solutions application configuration</h3><p>Open the <code>/Site</code> folder where Survey Solutions is installed, and open
<code>appsettings.Production.ini</code> file. This file will not be replaced during
application upgrades and will retain your local server configuration.</p><details><summary>📷 Survey Solutions configuration file</summary><p><img src=images/ss_config.png alt="Survey Solutions configuration file"></p></details><br><p><a name=baseurl></a></p><h4 id=base-url>Base URL</h4><p>If your server has domain name you need to change <code>BaseUrl</code> value to the name
you have (without trailing slash at the end of the URL). Make sure that this
URL can be used to open Survey Solutions app from server where application is
installed, otherwise export won&rsquo;t work.</p><p>Example of an ini-file with configured base URL:</p><div class=highlight><pre style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-INI data-lang=INI><span style=color:#00f>[Headquarters]</span>
BaseUrl=<span style=color:#a31515>https://demo.mysurvey.solutions</span>
</code></pre></div><p><a name=captcha></a></p><h4 id=captcha>Captcha</h4><p>A captcha is used to safeguard the application from brute force attacks on
user accounts and for protection of web mode from automatic creation of
interviews.</p><p>Survey Solutions may utilize a built-in (hosted) implementation of captcha
(default) or an external reCAPTCHA provided by Google (to be configured as
per instructions below).</p><p>To take advantage of the more secure reCAPTCHA implementation by Google, you
need to set it up in the Google reCAPTCHA admin and record the 2 issued keys
into your configuration file.</p><ul><li>Navigate to <a href=https://www.google.com/recaptcha/admin/create>creation page</a>
to register a new captcha. Click on the ℹ️-icons will give you helpful hints
on how to fill out that form.</li><li>Specify your public DNS name that is configured in
Survey Solutions <code>BaseUrl</code> property for the site name.</li><li>When selecting the reCAPTCHA type, select version 2 ("<em>reCAPTCHA v2</em>").</li><li>You can specify additional emails to receive notifications on problems or
increase in suspicious traffic (alerts are issued by Google).</li></ul><p>After you click the <code>Submit</code> button you will see a page where you can copy
the necessary <em>site key</em> and <em>secret key</em>. Then add the following content
into your <code>appsettings.Production.ini</code> file:</p><div class=highlight><pre style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-INI data-lang=INI><span style=color:#00f>[Captcha]</span>
CaptchaType=<span style=color:#a31515>Recaptcha</span>
SecretKey=<span style=color:#a31515>%Your secret key%</span>
SiteKey=<span style=color:#a31515>%Your site key%</span>
Version=<span style=color:#a31515>v2</span>
</code></pre></div><p><a name=googlemaps></a></p><h4 id=google-maps>Google maps</h4><p>If you are using a GPS question you should change
<a href=https://developers.google.com/maps/documentation/javascript/get-api-key>Google maps API key</a>.
After creating it in the console, add it to the <code>appsettings.Production.ini</code>
configuration file:</p><div class=highlight><pre style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-INI data-lang=INI><span style=color:#00f>[GoogleMap]</span>
ApiKey=<span style=color:#a31515>%Your API key%</span>
</code></pre></div><p>when not configured properly you will see error
<code>ReferenceError: google is not defined</code> on the map report page:</p><details><summary>📷 Survey Solutions maps error</summary><p><img src=images/ss_maps_error.png alt="Survey Solutions maps error"></p></details><br><p><a name=geotiff></a></p><h4 id=geotiff-files-support>GeoTIFF files support</h4><p>If you are using
<a href=/questionnaire-designer/questions/offline-gis-functionality-expansion/>GIS</a>
functionality and plan using TIFF files as maps, then you need to install the
<a href=https://gdal.org/>GDAL</a> library. The simplest way to do it (on Windows)
is to use the <a href=https://trac.osgeo.org/osgeo4w/wiki>OSGeo4W project</a>:
download installer from their web site and install only &ldquo;GDAL&rdquo;.</p><p>Survey Solutions will try to locate and make use of the GDAL libraries
at the default installation path: <code>C:\OSGeo4W64\bin\</code>. If you&rsquo;ve installed
it to another folder then add the following configuration to your
<code>appsettings.Production.ini</code> file:</p><div class=highlight><pre style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-INI data-lang=INI><span style=color:#00f>[Geospatial]</span>
GdalHome=<span style=color:#a31515>%Path to bin where GDAL is intalled%</span>
</code></pre></div><p>If this step is not performed, the users of this Survey Solutions instance
will not be able to upload maps in GeoTIFF format to the HQ. They will still
be able to upload maps in other accepted formats.</p></div></article></div></main><footer class="footer pt-3 pb-1 px-sm-3 px-lg-0"><div class="container copyright"><div class=float-left>&#169; 2016-2021 The World Bank Group.<br>All rights Reserved. <a href=https://www.worldbank.org/en/about/legal _target=blank>Legal</a><br><a class=text-primary href=/about/ _target=blank><b class=text-primary>About the team</b></a>
<a class=text-primary href=http://www.capterra.com/p/153927/Survey-Solutions/ target=_blank>Testimonials</a></div></div></footer><script src=https://code.jquery.com/jquery-3.3.1.min.js integrity="sha256-FgpCb/KJQlLNfOu91ta32o/NMZxltwRo8QtmkMRdAu8=" crossorigin=anonymous></script><script src=https://stackpath.bootstrapcdn.com/bootstrap/4.1.3/js/bootstrap.min.js integrity=sha384-ChfqqxuZUCnJSK3+MXmPNIyE6ZbWh2IMqE241rYiqJxyMiZ6OW/JmZQ5stwEULTy crossorigin=anonymous></script><script src=https://cdn.jsdelivr.net/algoliasearch/3/algoliasearch.min.js></script><script src=https://cdn.jsdelivr.net/autocomplete.js/0/autocomplete.min.js></script><script src=/js/asearch.js></script><script src=https://cdnjs.cloudflare.com/ajax/libs/ekko-lightbox/5.3.0/ekko-lightbox.min.js></script><script>$(document).on('click','[data-toggle="lightbox"]',function(a){a.preventDefault(),$(this).ekkoLightbox({alwaysShowClose:!0})})</script></body></html>